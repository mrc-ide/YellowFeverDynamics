<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="YellowFeverDynamics">
<title>Worked Example 4 - Yellow Fever Burden Calculation â€¢ YellowFeverDynamics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Worked Example 4 - Yellow Fever Burden Calculation">
<meta property="og:description" content="YellowFeverDynamics">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">YellowFeverDynamics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/A1Introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/A2Installation.html">Installation</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleAModelRun.html">Worked Example 1 - Single Model Run</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleBOutbreaks.html">Worked Example 2 - Outbreak Modelling</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleCDataGenerate.html">Worked Example 3 - Generating Epidemiological Data Sets</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleDBurden.html">Worked Example 4 - Yellow Fever Burden Calculation</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleEMCMC.html">Worked Example 5 - Parameter Estimation Using Markov Chain Monte Carlo Functions</a>
    <a class="dropdown-item" href="../articles/CGuideAInputs.html">Guide 1 - Inputs</a>
    <a class="dropdown-item" href="../articles/CGuideBParametersEnvironment.html">Guide 2 - Calculating Parameters From Environmental Data</a>
    <a class="dropdown-item" href="../articles/CGuideCModelResultsProcess.html">Guide 3 - Processing Model Results</a>
    <a class="dropdown-item" href="../articles/CGuideDLikelihood.html">Guide 5 - Calculating Likelihood Of Observed Data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Worked Example 4 - Yellow Fever Burden Calculation</h1>
            
      
      
      <div class="d-none name"><code>BWorkedExampleDBurden.Rmd</code></div>
    </div>

    
    
<p>This worked example demonstrates how to use the package to calculate
annual yellow fever burden () for multiple regions. We use the
total_burden_estimate() function for this, using similar inputs to the
data_match_single() and data_match_multi() functions described in <a href="https://mrc-ide.github.io/YellowFeverDynamics/articles/BWorkedExampleCDataGenerate.html" class="external-link">Worked
Example 3 - Generating Epidemiological Data Sets</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">YellowFeverDynamics</span><span class="op">)</span></span>
<span><span class="va">type</span><span class="op">=</span><span class="st">"FOI+R0 enviro"</span> <span class="co"># Type of parameter set used to calculate spillover FOI and R0 (here both calculated from environmental covariates)</span></span>
<span><span class="va">param_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>, <span class="st">"/exdata/enviro_coeffs_example_multi.csv"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Data frame containing one or more sets of parameter values</span></span>
<span><span class="va">input_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>, <span class="st">"/exdata/input_data_example.Rds"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="co"># Population and vaccination data in standard format (see Guide 2)</span></span>
<span><span class="va">enviro_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>, <span class="st">"/exdata/enviro_data_example.csv"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#Environmental data</span></span>
<span><span class="va">years_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2000</span><span class="op">)</span> <span class="co">#Years for which to calculate burden data</span></span>
<span><span class="va">n_reps</span> <span class="op">&lt;-</span> <span class="fl">5</span> <span class="co"># Number of repetitions for which to run model and obtain average outputs</span></span>
<span><span class="va">mode_start</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Flag indicating how to set initial population immunity level in addition to vaccination</span></span>
<span>                <span class="co"># If mode_start = 0, only vaccinated individuals</span></span>
<span>                <span class="co"># If mode_start = 1, shift some non-vaccinated individuals into recovered to give herd immunity</span></span>
<span>                <span class="co"># If mode_start = 2, use SEIRV input in list from previous run(s), set using start_SEIRV variable</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fl">5.0</span> <span class="co"># Time increment in days</span></span>
<span><span class="va">R0_fixed_values</span> <span class="op">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Fixed R0 values, vaccine efficacy and severe and fatal case reporting probabilities; here set to NULL because R0, vaccine efficacy and reporting probabilities are variable parameters being estimated</span></span>
<span><span class="va">vaccine_efficacy</span> <span class="op">&lt;-</span> <span class="fl">1.0</span> <span class="co"># Vaccine efficacy</span></span>
<span><span class="va">p_rep_severe</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Probability of reporting of individuals with severe symptoms</span></span>
<span><span class="va">p_rep_death</span> <span class="op">&lt;-</span> <span class="fl">0.2</span> <span class="co"># Probability of reporting of fatal infections</span></span>
<span><span class="va">flag_reporting</span><span class="op">=</span><span class="cn">FALSE</span> <span class="co">#Flag indicating whether to calculate numbers of reported cases and deaths (using p_rep_severe0 and p_rep_death0) in addition to actual numbers</span></span>
<span><span class="va">results</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/total_burden_estimate.html">total_burden_estimate</a></span><span class="op">(</span><span class="va">type</span>,<span class="va">param_dist</span>,<span class="va">input_data</span>,start_SEIRV<span class="op">=</span><span class="cn">NULL</span>,<span class="va">years_data</span>,<span class="va">n_reps</span>,<span class="va">mode_start</span>,<span class="va">flag_reporting</span>,</span>
<span>                               <span class="va">dt</span>,<span class="va">enviro_data</span>,<span class="va">R0_fixed_values</span>,<span class="va">vaccine_efficacy</span>,<span class="va">p_rep_severe</span>,<span class="va">p_rep_death</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sets:</span></span>
<span><span class="co">#&gt;  1 2 3 4 5 6 7 8 9 10</span></span></code></pre></div>
<p>The output of total_burden_estimate() consists of two data frames in
a list, one (by_region) giving the number of cases, deaths and (if
flag_reporting is set to TRUE) observed cases and deaths for each year,
region and parameter set. The second (all) gives the totals combined
across all regions for each year and parameter set.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">by_region</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;   year region set  cases deaths</span></span>
<span><span class="co">#&gt; 1 2000  IGL01   1 4321.6 1701.2</span></span>
<span><span class="co">#&gt; 2 2000  IGL02   1 3457.2 1348.2</span></span>
<span><span class="co">#&gt; 3 2000  IGL03   1 4988.4 1937.2</span></span>
<span><span class="co">#&gt; 4 2000  IGL04   1 5230.6 2039.6</span></span>
<span><span class="co">#&gt; 5 2000  IGL05   1 2239.6  865.2</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">all</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;   year set   cases  deaths</span></span>
<span><span class="co">#&gt; 1 2000   1 92842.0 36248.0</span></span>
<span><span class="co">#&gt; 2 2000   2 96613.8 37820.8</span></span>
<span><span class="co">#&gt; 3 2000   3 94967.0 36947.8</span></span>
<span><span class="co">#&gt; 4 2000   4 80898.6 31579.8</span></span>
<span><span class="co">#&gt; 5 2000   5 93634.8 36689.2</span></span></code></pre></div>
<p>We can use the output of total_burden_estimate() to, for example,
model vaccine impact by examining the difference in burden between a
no-vaccination scenario and a scenario featuring a specified vaccination
program.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input_data_novacc</span> <span class="op">&lt;-</span> <span class="va">input_data</span> <span class="co"># Input data for no-vaccination scenario</span></span>
<span><span class="va">input_data_novacc</span><span class="op">$</span><span class="va">vacc_data</span><span class="op">[</span>,<span class="va">input_data_novacc</span><span class="op">$</span><span class="va">years_labels</span><span class="op">&gt;=</span><span class="va">years_data</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">input_data_novacc</span><span class="op">$</span><span class="va">vacc_data</span><span class="op">[</span>,<span class="va">input_data_novacc</span><span class="op">$</span><span class="va">years_labels</span><span class="op">&gt;=</span><span class="va">years_data</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="op">]</span><span class="op">*</span><span class="fl">0</span> <span class="co"># Amend input data to remove all vaccination in or after the first year of the period considered</span></span>
<span><span class="va">results_novacc</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/total_burden_estimate.html">total_burden_estimate</a></span><span class="op">(</span><span class="va">type</span>,<span class="va">param_dist</span>,<span class="va">input_data_novacc</span>,start_SEIRV<span class="op">=</span><span class="cn">NULL</span>,<span class="va">years_data</span>,<span class="va">n_reps</span>,<span class="va">mode_start</span>,</span>
<span>                              <span class="va">flag_reporting</span>,<span class="va">dt</span>,<span class="va">enviro_data</span>,<span class="va">R0_fixed_values</span>,<span class="va">vaccine_efficacy</span>,<span class="va">p_rep_severe</span>,<span class="va">p_rep_death</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sets:</span></span>
<span><span class="co">#&gt;  1 2 3 4 5 6 7 8 9 10</span></span>
<span><span class="va">deaths_prevented_by_region</span><span class="op">=</span><span class="va">results_novacc</span><span class="op">$</span><span class="va">by_region</span><span class="op">$</span><span class="va">deaths</span><span class="op">-</span><span class="va">results</span><span class="op">$</span><span class="va">by_region</span><span class="op">$</span><span class="va">deaths</span> <span class="co">#</span></span>
<span><span class="va">deaths_prevented_all</span><span class="op">=</span><span class="va">results_novacc</span><span class="op">$</span><span class="va">all</span><span class="op">$</span><span class="va">deaths</span><span class="op">-</span><span class="va">results</span><span class="op">$</span><span class="va">all</span><span class="op">$</span><span class="va">deaths</span> <span class="co"># </span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Keith Fraser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
