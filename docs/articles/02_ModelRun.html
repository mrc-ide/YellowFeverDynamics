<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="YellowFeverDynamics">
<title>Vignette 2 - Running Model â€¢ YellowFeverDynamics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vignette 2 - Running Model">
<meta property="og:description" content="YellowFeverDynamics">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">YellowFeverDynamics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_Installation.html">Vignette 1 - Installation</a>
    <a class="dropdown-item" href="../articles/02_ModelRun.html">Vignette 2 - Running Model</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Vignette 2 - Running Model</h1>
            
      
      
      <div class="d-none name"><code>02_ModelRun.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates how to set up and carry out a single run
of the model for a single region.</p>
<p>First load the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">YellowFeverDynamics</span><span class="op">)</span></span></code></pre></div>
<p>Population and vaccination data for one or more regions to be
considered are stored in a list object along with a list of regions, the
years included, and the age groups into which the population is divided.
Here an example data set is loaded from the package and a data set for a
single region is constructed:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input_data_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>,<span class="st">"/exdata/input_data_example.Rds"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">regions</span><span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">region_labels</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">check</span><span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">region_labels</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">regions</span></span>
<span><span class="va">input_data</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region_labels<span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">region_labels</span><span class="op">[</span><span class="va">check</span><span class="op">]</span>,years_labels<span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">years_labels</span>,</span>
<span>                age_labels<span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">age_labels</span>,vacc_data<span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">vacc_data</span><span class="op">[</span><span class="va">check</span>,,<span class="op">]</span>,</span>
<span>                pop_data<span class="op">=</span><span class="va">input_data_all</span><span class="op">$</span><span class="va">pop_data</span><span class="op">[</span><span class="va">check</span>,,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>The other input parameters to the functions which run the model are
as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">FOI_spillover</span><span class="op">=</span><span class="fl">1.0e-8</span>            <span class="co"># Force of infection due to spillover from sylvatic reservoir</span></span>
<span><span class="va">R0</span><span class="op">=</span><span class="fl">1.5</span>                          <span class="co"># Reproduction number for urban spread of infection</span></span>
<span><span class="va">vacc_data</span><span class="op">=</span><span class="va">input_data</span><span class="op">$</span><span class="va">vacc_data</span>  <span class="co"># Vaccination coverage in each age group by year</span></span>
<span><span class="va">pop_data</span><span class="op">=</span><span class="va">input_data</span><span class="op">$</span><span class="va">pop_data</span>    <span class="co"># Population in each age group by year</span></span>
<span><span class="va">year0</span><span class="op">=</span><span class="fl">1940</span>                      <span class="co"># First year in population/vaccination data</span></span>
<span><span class="va">mode_start</span><span class="op">=</span><span class="fl">1</span>                    <span class="co"># Flag indicating how to set initial population immunity level in addition to vaccination</span></span>
<span>                                <span class="co"># If mode_start=0, only vaccinated individuals</span></span>
<span>                                <span class="co"># If mode_start=1, shift some non-vaccinated individuals into recovered to give herd immunity</span></span>
<span>                                <span class="co"># If mode_start=2, use SEIRVC input in list from previous run(s)</span></span>
<span><span class="va">n_particles</span><span class="op">=</span><span class="fl">10</span>                   <span class="co"># Number of particles to run</span></span>
<span><span class="va">n_threads</span><span class="op">=</span><span class="fl">1</span>                     <span class="co"># Number of threads to run</span></span>
<span><span class="va">year_end</span><span class="op">=</span><span class="fl">2001</span>                   <span class="co"># Year at which to stop generating data (year after last year where data is desired)</span></span>
<span><span class="va">year_data_begin</span><span class="op">=</span><span class="fl">1999</span>            <span class="co"># Year to begin saving data</span></span>
<span><span class="va">vaccine_efficacy</span><span class="op">=</span><span class="fl">1.0</span>            <span class="co"># Proportional vaccine efficacy</span></span>
<span><span class="va">start_SEIRV</span><span class="op">=</span><span class="cn">NULL</span>                <span class="co"># SEIRV data from end of a previous run to use as input (if mode_start=2)</span></span>
<span><span class="va">dt</span><span class="op">=</span><span class="fl">5.0</span>                          <span class="co"># Time increment in days to use in model (should be either 1.0 or 5.0 days</span></span></code></pre></div>
<p>The Full_Model_Run function is normally used to run the model for the
inputs above:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test1</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/Full_Model_Run.html">Full_Model_Run</a></span><span class="op">(</span><span class="va">FOI_spillover</span>,<span class="va">R0</span>,<span class="va">vacc_data</span>,<span class="va">pop_data</span>,<span class="va">year0</span>,<span class="va">mode_start</span>,<span class="va">n_particles</span>,<span class="va">n_threads</span>,<span class="va">year_end</span>,</span>
<span>                     <span class="va">year_data_begin</span>,<span class="va">vaccine_efficacy</span>,<span class="va">start_SEIRV</span>,<span class="va">dt</span><span class="op">)</span></span></code></pre></div>
<p>The output of Full_Model_Run includes, for each repetition, date
information, the total force of infection FOI_total at each data point,
the numbers of susceptible (S), exposed (E), infectious (I), recovered
(R) and vaccinated (V) people at each time point and the number of new
infections (C) at each time point organized by age group.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/plot_model_output.html">plot_model_output</a></span><span class="op">(</span><span class="va">test1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span></code></pre></div>
<p>For some applications, the Basic_Model_Run function can be used
instead. This is identical to Full_Model_Run but does not output the
total FOI at each time point or the number of new infections at each
time point.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test2</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/Basic_Model_Run.html">Basic_Model_Run</a></span><span class="op">(</span><span class="va">FOI_spillover</span>,<span class="va">R0</span>,<span class="va">vacc_data</span>,<span class="va">pop_data</span>,<span class="va">year0</span>,<span class="va">mode_start</span>,<span class="va">n_particles</span>,<span class="va">n_threads</span>,<span class="va">year_end</span>,</span>
<span>                     <span class="va">year_data_begin</span>,<span class="va">vaccine_efficacy</span>,<span class="va">start_SEIRVC</span>,<span class="va">dt</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Keith Fraser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
