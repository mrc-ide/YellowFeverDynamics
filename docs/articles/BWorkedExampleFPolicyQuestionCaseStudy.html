<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="YellowFeverDynamics">
<title>Worked Example 6 - Policy Question Case Study â€¢ YellowFeverDynamics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Worked Example 6 - Policy Question Case Study">
<meta property="og:description" content="YellowFeverDynamics">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">YellowFeverDynamics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/A1Introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/A2Installation.html">Installation</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleAModelRun.html">Worked Example 1 - Single Model Run</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleBOutbreaks.html">Worked Example 2 - Outbreak Modelling</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleCDataGenerate.html">Worked Example 3 - Generating Epidemiological Data Sets</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleDBurden.html">Worked Example 4 - Yellow Fever Burden Calculation</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleEMCMC.html">Worked Example 5 - Parameter Estimation Using Markov Chain Monte Carlo Functions</a>
    <a class="dropdown-item" href="../articles/BWorkedExampleFPolicyQuestionCaseStudy.html">Worked Example 6 - Policy Question Case Study</a>
    <a class="dropdown-item" href="../articles/CGuideAInputs.html">Guide 1 - Inputs</a>
    <a class="dropdown-item" href="../articles/CGuideBParametersEnvironment.html">Guide 2 - Calculating Parameters From Environmental Data</a>
    <a class="dropdown-item" href="../articles/CGuideCModelResultsProcess.html">Guide 3 - Processing Model Results</a>
    <a class="dropdown-item" href="../articles/CGuideDLikelihood.html">Guide 4 - Calculating Likelihood Of Observed Data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Worked Example 6 - Policy Question Case Study</h1>
            
      
      
      <div class="d-none name"><code>BWorkedExampleFPolicyQuestionCaseStudy.Rmd</code></div>
    </div>

    
    
<p>This worked example demonstrates how the package can be used to carry
out calculations aimed at answering a specific policy question.</p>
<p>In the scenario presented here, we consider an imaginary country
named Imaginaryland with 25 administrative sub-divisions which all have
the same population but different values of relevant environmental
covariates. Imaginaryland currently (20XX) has no vaccination against
yellow fever, but is expected to begin vaccination of infants (age 0-1)
for yellow fever in 20XX+1, with a coverage of 80% in every region. A
vaccination campaign covering 50% of people over the age of 1 is also
planned to take place in the same year.</p>
<p>The policy questions we want to answer are:</p>
<ul>
<li>How many deaths will be prevented (in each region and in total
across the entire country) between 20XX+1 and 20YY due to the
vaccination campaign in 20XX+1 and infant vaccination in that year and
subsequent years, compared to a scenario where no vaccination is carried
out at all?</li>
<li>If the campaign to vaccinate people over age 1 is delayed for 1 year
(to 20XX+2) or 2 years (20XX+3), how many additional deaths will occur
compared to the planned scenario where the campaign takes place in
20XX+1 at the same time as the start of infant vaccination?</li>
</ul>
<p>The code below loads and plots maps of the environmental covariate
values for the 25 sub-divisions of Imaginaryland:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">YellowFeverDynamics</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">YFDAux</span><span class="op">)</span> <span class="co">#Auxiliary functions for plotting</span></span>
<span><span class="va">enviro_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>, </span>
<span>                                     <span class="st">"/exdata/enviro_data_example.csv"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span>                        header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Environmental data</span></span>
<span><span class="va">regions</span><span class="op">=</span><span class="va">enviro_data</span><span class="op">$</span><span class="va">region</span></span>
<span><span class="va">n_regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">enviro_data</span><span class="op">)</span></span>
<span><span class="va">n_env_vars</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">enviro_data</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span></span>
<span><span class="co"># Shapefile</span></span>
<span><span class="va">shape_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/YellowFeverDynamics/man/map_shapes_load.html" class="external-link">map_shapes_load</a></span><span class="op">(</span><span class="va">regions</span>, </span>
<span>                              shapefiles<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>,</span>
<span>                                           <span class="st">"/exdata/shapefile_example.shp"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                              region_label_type<span class="op">=</span><span class="st">"GID_1"</span><span class="op">)</span> </span>
<span><span class="va">colour_scheme</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>, </span>
<span>                                 <span class="st">"/exdata/colour_scheme_example.Rds"</span>, sep<span class="op">=</span><span class="st">"/"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">colour_scale</span><span class="op">=</span><span class="va">colour_scheme</span><span class="op">$</span><span class="va">colour_scale</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n_env_vars</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">null1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/YellowFeverDynamics/man/create_map.html" class="external-link">create_map</a></span><span class="op">(</span><span class="va">shape_data</span>, <span class="va">enviro_data</span><span class="op">[</span>,<span class="va">i</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/pretty.html" class="external-link">pretty</a></span><span class="op">(</span><span class="va">enviro_data</span><span class="op">[</span>,<span class="va">i</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span>,<span class="fl">5</span><span class="op">)</span>, </span>
<span>                      <span class="va">colour_scale</span>, pixels_max<span class="op">=</span><span class="fl">720</span>, text_size<span class="op">=</span><span class="fl">0.75</span>, map_title<span class="op">=</span><span class="st">""</span>, </span>
<span>                      legend_title<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">enviro_data</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                      legend_position<span class="op">=</span><span class="st">"topleft"</span>, legend_format<span class="op">=</span><span class="st">"f"</span>, legend_dp<span class="op">=</span><span class="fl">0</span>, </span>
<span>                      output_file<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>A single set of coefficients of the environmental covariates has been
previously obtained via MCMC estimation based on available
epidemiological data (from Imaginaryland itself and/or from other
regions where suitable data is available). The code below (also
displayed in <a href="https://mrc-ide.github.io/YellowFeverDynamics/articles/CGuideBParametersEnvironment.html" class="external-link">Guide
2 - Calculating Parameters From Environmental Data</a>) calculates
values of spillover force of infection and basic reproduction number for
human-human transmission and plots maps of them:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">enviro_coeffs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"YellowFeverDynamics"</span><span class="op">)</span>, </span>
<span>                                       <span class="st">"/exdata/enviro_coeffs_example.csv"</span>, </span>
<span>                                       sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">epi_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">enviro_data</span><span class="op">$</span><span class="va">region</span>, FOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="va">n_regions</span><span class="op">)</span>, </span>
<span>                       R0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="va">n_regions</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">n_region</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n_regions</span><span class="op">)</span><span class="op">{</span></span>
<span> <span class="va">FOI_R0_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/param_calc_enviro.html">param_calc_enviro</a></span><span class="op">(</span>enviro_coeffs <span class="op">=</span> <span class="va">enviro_coeffs</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>, </span>
<span>                  enviro_covar_values <span class="op">=</span> <span class="va">enviro_data</span><span class="op">[</span><span class="va">n_region</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">enviro_data</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span> <span class="va">epi_data</span><span class="op">$</span><span class="va">FOI</span><span class="op">[</span><span class="va">n_region</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">FOI_R0_values</span><span class="op">$</span><span class="va">FOI</span></span>
<span> <span class="va">epi_data</span><span class="op">$</span><span class="va">R0</span><span class="op">[</span><span class="va">n_region</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">FOI_R0_values</span><span class="op">$</span><span class="va">R0</span></span>
<span><span class="op">}</span></span>
<span><span class="va">null1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/YellowFeverDynamics/man/create_map.html" class="external-link">create_map</a></span><span class="op">(</span><span class="va">shape_data</span>, <span class="va">epi_data</span><span class="op">$</span><span class="va">FOI</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/pretty.html" class="external-link">pretty</a></span><span class="op">(</span><span class="va">epi_data</span><span class="op">$</span><span class="va">FOI</span>, <span class="fl">8</span><span class="op">)</span>, </span>
<span>                    <span class="va">colour_scale</span>, pixels_max<span class="op">=</span><span class="fl">720</span>, text_size<span class="op">=</span><span class="fl">0.75</span>, map_title<span class="op">=</span><span class="st">""</span>, </span>
<span>                    legend_title<span class="op">=</span><span class="st">"FOI"</span>, legend_position<span class="op">=</span><span class="st">"topleft"</span>, legend_format<span class="op">=</span><span class="st">"e"</span>,</span>
<span>                    legend_dp<span class="op">=</span><span class="fl">1</span>, output_file<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">null2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/YellowFeverDynamics/man/create_map.html" class="external-link">create_map</a></span><span class="op">(</span><span class="va">shape_data</span>, <span class="va">epi_data</span><span class="op">$</span><span class="va">R0</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/pretty.html" class="external-link">pretty</a></span><span class="op">(</span><span class="va">epi_data</span><span class="op">$</span><span class="va">R0</span>, <span class="fl">8</span><span class="op">)</span>, </span>
<span>                    <span class="va">colour_scale</span>, pixels_max<span class="op">=</span><span class="fl">720</span>, text_size<span class="op">=</span><span class="fl">0.75</span>, map_title<span class="op">=</span><span class="st">""</span>, </span>
<span>                    legend_title<span class="op">=</span><span class="st">"R0"</span>, legend_position<span class="op">=</span><span class="st">"topleft"</span>, legend_format<span class="op">=</span><span class="st">"f"</span>, </span>
<span>                    legend_dp<span class="op">=</span><span class="fl">1</span>, output_file<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Keith Fraser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
